<!doctype html>

<html>

<head>

    <meta charset="utf-8">

    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <title>HPCC Systems - Visualization Framework</title>

    <script src="http://viz.hpccsystems.com/v1.4.0/dist-amd/hpcc-viz.js"></script>

    <script src="http://viz.hpccsystems.com/v1.4.0/dist-amd/hpcc-bundles.js"></script>

    <script>

        require.config({

            paths: {

                "src": "http://viz.hpccsystems.com/v1.4.0/dist-amd",

                "font-awesome": "http://viz.hpccsystems.com/v1.4.0/dist-amd/font-awesome/css/font-awesome.min"

            }

        });

    </script>

</head>

<body>

    <div id="marshaller" style="width:50%; height:100vh; float:left">

    </div>

    <div id="editor" style="width:50%; height:100vh; float:right">

    </div>

    <script>
        var getPersist = null;
        var setPersist = null;
        var getDatabomb = null;
        var getDdl = null ;
        

        require(["src/marshaller/HTML", "src/other/PropertyEditor", "src/other/Persist"], function (HTML, PropertyEditor, Persist) {

            var persist = '%_persist_%' ;
			var ddl = '%_ddl_%' ;
			var databomb = '%_data_%' ;
						
            var editor = new PropertyEditor()
                .target("editor")
            ;

            var widget = new HTML()
                .target("marshaller")
                .ddlUrl(ddl)
                .databomb(databomb)
                .render(function() {
                    editor
                        .data([widget])
                        .render()
                    ;
                })
            ;

            getPersist = function() {
                return Persist.serialize(widget);
            }
            getDdl = function() {
                return ddl;
            }
            getDatabomb = function() {
                return databomb;
            }

            setPersist = function(str) {
                 //  TODO:  GJS
           }

        });

    </script>

</body>

</html>
